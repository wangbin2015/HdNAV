<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="autor" content="Breezy New Media (info@breezy.cz)" />
<meta name="copyright" content="DeepBlue - free luxury website template 2008" />
<meta name="description" content=""  />
<meta name="keywords" content="" />
<title>海大地图</title>
<link rel="stylesheet" type="text/css" href="../css/default.css" media="screen" />
<link rel="stylesheet" type="text/css" href="../css/print.css" media="print" />
<link rel="stylesheet" href="../hdmap/hdmap.css" />
<style>
	.code{
		display: block;
		width: 521px;
		overflow-x: scroll;
		white-space: nowrap;
	}
</style>
<script src="../hdmap/hdmap.min.js"></script>
	<!--<base target="_blank"></base>-->
</head>
<body>
<div id="view">
  <!-- #header (main heading + logo with slogan) -->
  <div id="head">
    <!-- main headings with search component -->
    <div id="main">
      <h1><a href="../index.html">HDMap</a></h1>
      <h2><a href="#">简单，快捷，高效</a></h2>
      <form action="" method="post" id="search">
        <fieldset>
        <input type="text" name="" value="搜索" class="button" />
        <input type="submit" value="" title="Search" class="submit" />
        </fieldset>
      </form>
    </div>
    <!-- /main headings with search component -->
    <hr class="hidden" />
    <!-- main horizontal menu -->
    <div id="mainMenu">
      <ul>
        <li class="active"><a href="../index.html">Web开发<span></span></a></li>
        <li><a href="#">Android开发<span></span></a></li>
        <li><a href="#">iOS开发 <span></span></a></li>
        <li><a href="#">服务接口<span></span></a></li>
        <li class="fr"><a href="#">公司主页<span></span></a></li>
        <li class="fr"><a href="#">法律条款<span></span></a></li>
      </ul>
    </div>
    <!-- /main horizontal menu -->
    <hr class="hidden" />
    <!-- logo with slogan -->
    <div id="logo"> <a href="#" class="block">&nbsp;</a>
      <h2>HDMap简介...</h2>
    </div>
    <!-- /logo with slogan -->
    <hr class="hidden" />
  </div>
  <!-- /#header (main heading + logo with slogan) -->
  <!-- #main content construct -->
  <div id="content">
    <!-- #left part of web - main content -->
    <div id="contentBlock">
      <!-- #first (main) article -->
      
      <!-- /#first (main) article -->
      <!-- #cols 50:50 -->
      <div class="col1">
		  <div id="example_id" class="item">
			  <h3>HDMap.LocalSearch（Example）</h3>
			  <table>
				  <tbody>
				  <tr>
					  <td>
						  <div id="map1" style="height:200px"></div>
						  <script type="text/javascript">
							  var layer = HDMap.tileLayer('http://hdnav.zicp.net:8008/v1/rastertiles/mix_map/{z}/{x}/{y}.png', {
								  attribution: ''
							  });
							  var map = new HDMap.Map('map1', {
								  center: new HDMap.LatLng(38.92705, 121.6580833),
								  zoom: 13,
								  maxZoom: 17,
								  minZoom: 3,
								  layers: [layer]
							  });
							    function hdmapLocalSearch(text, callResponse)
    						  {
        						var searchOption = new HDMap.LocalSearchOptions('http://190.0.0.29:8080/',callResponse);
        						var searchSetting = new HDMap.LocalSearchSetting(text,0,4);
        						var searcher =  new HDMap.LocalSearch(searchOption);
        						searcher.searchInCity(searchSetting, '大连', 0);
    						  }
    						  var controlSearch =new HDMap.Control.Search({
						        sourceData: hdmapLocalSearch,
								formatData: formatJSON,
								position:"topright"
						    });
							  function formatJSON(result)
							  {
								  var json = {},
										  key, loc, disp = [];
								  var poiList = result.getPoiList();
								  for(var i in poiList)
								  {
									  key = poiList[i].name;
									  loc = HDMap.latLng( poiList[i].point.lat, poiList[i].point.lng );
									  json[ key ]= loc;	//key,value format
								  }
								  return json;
							  }
 							  map.addControl(controlSearch);
						  </script>
					  </td>
				  </tr>
				  <tr>
					  <td>
						  <code class="code">
							  //创建地图对象<br/>
							  var map = new HDMap.Map('map1', {<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;center: new HDMap.LatLng(38.92705, 121.6580833),<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;zoom: 13,<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;maxZoom: 17,<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;minZoom: 3,<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;layers: [layer]<br/>
							  });<br/>
							  //创建本地搜索<br/>
							  function hdmapLocalSearch(text, callResponse)<br/>
							  {<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;//配置搜索选项<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var searchOption = new HDMap.LocalSearchOptions('http://190.0.0.29:8080/',callResponse);<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;//配置搜索设置<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var searchSetting = new HDMap.LocalSearchSetting(text,0,4);<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;//实例化一个LocalSearch对象<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var searcher =  new HDMap.LocalSearch(searchOption);<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;//设置区域内(行政区划内)检索<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;searcher.searchInCity(searchSetting, '大连', 0);<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;//创建Search控件<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var controlSearch =new HDMap.Control.Search({<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceData: hdmapLocalSearch,<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formatData: formatJSON,<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position:"topright"<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;});<br/>
							  }<br/>
							  //JSON数据格式化<br/>
							  function formatJSON(result)<br/>
							  {<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var json = {},<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key, loc, disp = [];<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;var poiList = result.getPoiList();<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;for(var i in poiList)<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = poiList[i].name;<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loc = HDMap.latLng( poiList[i].point.lat, poiList[i].point.lng );<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json[ key ]= loc;	//key,value format<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
							  &nbsp;&nbsp;&nbsp;&nbsp; return json;<br/>
							  }<br/>
							  //添加LocalSearch<br/>
							  map.addControl(controlSearch);<br/>
						  </code>
					  </td>
				  </tr>
				  </tbody>
			  </table>
		  </div>
		<div class="item">
          <h3>创建（Creation）</h3>
          <table>
		      <tbody>
		      	<tr>
					<th>localSearch创建</th>
					<th>说明</th>
				</tr>
				<tr>
					<td>
						<code>
							var searcher =  new HDMap.LocalSearch(new HDMap.LocalSearchOptions(url,callResponse));
						</code>
					</td>
					<td>实例化一个LocalSearch对象</td>
				</tr>
			    </tbody>
	        </table>
        </div>
        
        <div class="item">
          <h3>选项（Options）</h3>
          <table>
		      <tbody>
		      	<tr>
					<th>选项</th>
					<th>类型</th>
					<th>说明</th>
				</tr>
				<tr>
					<td>
						<code>keyword</code>
					</td>
					<td>
						<code>Sring</code>
					</td>
					<td>
						搜索的关键字
					</td>
				</tr>
				<tr>
					<td>
						<code>pageSize</code>
					</td>
					<td>
						<code>Number</code>
					</td>
					<td>
						每页显示条数
					</td>
				</tr>
				<tr>
					<td>
						<code>pageIndex</code>
					</td>
					<td>
						<code>Number</code>
					</td>
					<td>
						显示搜索结果的页码索引
					</td>
				</tr>
				<tr>
					<td>
						<code>url</code>
					</td>
					<td>
						<code>Sring</code>
					</td>
					<td>
						地图服务端口地址
					</td>
				</tr>
				<tr>
					<td>
						<code>onSearchComplete</code>
					</td>
					<td>
						<code>function</code>
					</td>
					<td>
						检索结束后的回调函数
					</td>
				</tr>
			    </tbody>
	        </table>
        </div>

        <div class="item">
          <h3>方法（Methods）</h3>
          <table>
		      <tbody>
		      	<tr>
					<th>选项</th>
					<th>类型</th>
					<th>说明</th>
				</tr>
				<tr>
					<td>
						<code>searchInCity()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						区域内(行政区划内)检索
					</td>
				</tr>
				<tr>
					<td>
						<code>searchInBounds()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						矩形检索
					</td>
				</tr>
				
				<tr>
					<td>
						<code>searchNearby()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						周边(圆)检索
					</td>
				</tr>
				<tr>
					<td>
						<code>gotoPage()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						检索特定页面的结果(上一次检索事件)
					</td>
				</tr>
				<tr>
					<td>
						<code>getResults()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						获取检索结果
					</td>
				</tr>
				<tr>
					<td>
						<code>clearResults()</code>
					</td>
					<td>
						<code>jsonObject</code>
					</td>
					<td>
						清除结果
					</td>
				</tr>
				<tr>
					<td>
						<code>setSearchCompleteCallback()</code>
					</td>
					<td>
						<code>object</code>
					</td>
					<td>
						设置检索完成后的回调函数
					</td>
				</tr>
			    </tbody>
	        </table>
        </div>
      </div>
    </div>
    <!-- /#left part of web - main content -->
    <hr class="hidden" />
    <!-- #right part of web - submenu boxes with simple text -->
    <div id="menuBlock">
      <div class="box boxText firstBox">
        <div class="self">
          <p class="last">API v1.0.0</p>
        </div>
      </div>
      <div class="box">
        <!-- <h3>Map Object</h3> -->
        <ul>
          <li><a href="../index.html#example_id">HDMap.map</a></li>
          <li><a href="./marker.html#example_id">HDMap.Marker</a></li>
          <li><a href="./popup.html#example_id">HDMap.Popup</a></li>
          <li><a href="./tileLayer.html#example_id">HDMap.TileLayer</a></li>
          <li><a href="./path.html#example_id">HDMap.Path</a></li>
          <li><a href="./polyline.html#example_id">HDMap.Polyline</a></li>
          <li><a href="./polygon.html#example_id">HDMap.Polygon</a></li>
          <li><a href="./circle.html#example_id">HDMap.Circle</a></li>
          <li><a href="./shipLayer.html#example_id">HDMap.ShipLayer</a></li>
          <li><a href="#example_id">HDMap.LocalSearch</a></li>
          <li><a href="./geocoder.html#example_id">HDMap.Geocoder</a></li>
        </ul>
      </div>
    </div>
    <!-- /#right part of web -->
  </div>

  <!-- #footer -->
  <div id="foot">
    <p class="fl">&copy; all rights reserved</p>
    <!-- /#   LINKS AND AUTHOR-SIGNATURE CANNOT BE REMOVED !!! -->
    <p class="fr">created by&nbsp;<a href="#" class="ico ico-breezy">www.hdnav.cn</a></p>
  </div>
  <!-- /#footer -->
</div>
</body>
</html>
